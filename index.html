<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>JANNNMG</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Times New Roman', Times, serif;
            -webkit-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }
        .main-container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #mainButton {
            width: 480px;
            height: 300px;
            cursor: pointer;
            border: 5px solid #333;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease;
        }
        #mainButton:hover {
            transform: scale(1.05);
        }
        #centerClick {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 42px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 8px #000;
            z-index: 100;
        }
        #game-over-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('assets/game-over.gif');
            background-size: cover;
            background-position: center;
            z-index: 1000;
            display: none;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <button id="mainButton"><span id="centerClick">click</span></button>
    </div>
    <div id="game-over-overlay"></div>
    <script>
        const mainButton = document.getElementById('mainButton');
        const gameOverOverlay = document.getElementById('game-over-overlay');
        const gameOverSound = new Audio('assets/game-over-sound.mp3');
        let popupsStarted = false;

        function lockCursor() {
            const el = document.body;
            el.requestPointerLock = el.requestPointerLock || el.mozRequestPointerLock || el.webkitRequestPointerLock;
            if (el.requestPointerLock) el.requestPointerLock();
            document.addEventListener('pointerlockchange', () => {
                if (document.pointerLockElement !== el) el.requestPointerLock();
            });
        }

        function openPopups() {
            if (popupsStarted) return;
            popupsStarted = true;
            setInterval(() => {
                window.open('popup.html', 'popup_' + Date.now(), 'width=300,height=200,resizable=no,scrollbars=no,toolbar=no');
            }, 1500);
        }

        function triggerGameOver() {
            document.documentElement.requestFullscreen().catch(() => {});
            lockCursor();
            document.body.style.cursor = 'grabbing';
            mainButton.style.display = 'none';
            gameOverOverlay.style.display = 'flex';
            gameOverSound.play();
        }

        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement) {
                openPopups();
            }
        });

        mainButton.addEventListener('click', triggerGameOver);
    </script>
</body>
</html>
